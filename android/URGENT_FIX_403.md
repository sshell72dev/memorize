# СРОЧНОЕ ИСПРАВЛЕНИЕ: Ошибка 403 Forbidden

## Проблема

Ошибка `403 Forbidden` означает, что **сервисный аккаунт не имеет роли `ai.languageModels.user`** для каталога `b1gdg5qqsp63ja0ct5mr`.

## ⚠️ ВАЖНО: Это НЕ проблема с API ключом!

Даже с новым API ключом ошибка сохраняется, потому что проблема в **правах доступа сервисного аккаунта**, а не в самом ключе.

## Решение (обязательно сделать в Yandex Cloud Console)

### Шаг 1: Откройте Yandex Cloud Console
https://console.cloud.yandex.ru/

### Шаг 2: Перейдите к сервисному аккаунту
1. **IAM** → **Сервисные аккаунты**
2. Найдите аккаунт **"memorize"** (ID: `ajefkbqtv35r43nt4qhc`)
3. Откройте его

### Шаг 3: Добавьте роль `ai.languageModels.user`

**ВАРИАНТ А: Через интерфейс сервисного аккаунта**
1. В карточке сервисного аккаунта найдите раздел **"Роли в каталоге"**
2. Нажмите **"Назначить роли"** или кнопку редактирования
3. Выберите каталог: `b1gdg5qqsp63ja0ct5mr`
4. Добавьте роль: **`ai.languageModels.user`**
5. Сохраните

**ВАРИАНТ Б: Через раздел "Роли и доступ" каталога**
1. Перейдите в каталог `b1gdg5qqsp63ja0ct5mr`
2. Откройте **"Роли и доступ"** или **"Access bindings"**
3. Нажмите **"Назначить роли"**
4. Выберите сервисный аккаунт: `ajefkbqtv35r43nt4qhc` (memorize)
5. Добавьте роль: **`ai.languageModels.user`**
6. Сохраните

### Шаг 4: Проверьте результат

После добавления роли должно быть видно:
- Сервисный аккаунт: `ajefkbqtv35r43nt4qhc` (memorize)
- Каталог: `b1gdg5qqsp63ja0ct5mr`
- Роли: `editor` + **`ai.languageModels.user`** ← эта роль обязательна!

## ⏱️ После добавления роли

1. **Подождите 1-2 минуты** (изменения применяются не мгновенно)
2. **Пересоберите приложение**:
   - Build → Clean Project
   - Build → Rebuild Project
3. **Запустите и попробуйте поиск снова**

## Проверка через Yandex CLI (опционально)

Если у вас установлен Yandex CLI, можете проверить:

```bash
# Проверить роли сервисного аккаунта в каталоге
yc resource-manager folder list-access-bindings b1gdg5qqsp63ja0ct5mr | grep ajefkbqtv35r43nt4qhc

# Добавить роль (если есть права)
yc resource-manager folder add-access-binding b1gdg5qqsp63ja0ct5mr \
  --role ai.languageModels.user \
  --subject serviceAccount:ajefkbqtv35r43nt4qhc
```

## Почему это важно?

- Роль `editor` дает доступ к ресурсам каталога
- Роль `ai.languageModels.user` дает доступ к **YandexGPT API**
- **Обе роли нужны** для работы приложения!

## Если проблема сохраняется

1. Убедитесь, что роль добавлена именно для **каталога** `b1gdg5qqsp63ja0ct5mr`
2. Проверьте, что используется правильный **сервисный аккаунт** `ajefkbqtv35r43nt4qhc`
3. Убедитесь, что API ключ принадлежит этому сервисному аккаунту
4. Подождите еще 2-3 минуты после добавления роли

---

**Это единственный способ исправить ошибку 403!** Код приложения работает правильно, проблема только в настройках прав доступа в Yandex Cloud Console.

