# Исправление ошибки 403 Forbidden

## Проблема

Ошибка `403 Forbidden` с сообщением:
```
Permission to [resource-manager.folder b1gdg5qqsp63ja0ct5mr] denied
```

Это означает, что **API ключ не имеет доступа к каталогу** `b1gdg5qqsp63ja0ct5mr`.

## Почему это могло произойти?

Если это работало вчера, возможные причины:
1. **Изменены права доступа** сервисного аккаунта
2. **API ключ был пересоздан** и не имеет тех же прав
3. **Роль была удалена** или изменена в Yandex Cloud Console

## Решение (пошагово)

### Шаг 1: Проверьте сервисный аккаунт

1. Откройте [Yandex Cloud Console](https://console.cloud.yandex.ru/)
2. Перейдите в **IAM → Сервисные аккаунты**
3. Найдите сервисный аккаунт **"memorize"** (ID: `ajefkbqtv35r43nt4qhc`)
4. Откройте его

### Шаг 2: Проверьте роли в каталоге

1. В карточке сервисного аккаунта найдите раздел **"Роли в каталоге"**
2. Убедитесь, что есть роль **`ai.languageModels.user`**
3. Если этой роли нет:
   - Нажмите **"Назначить роли"** или **"Редактировать"**
   - Добавьте роль **`ai.languageModels.user`** для каталога `b1gdg5qqsp63ja0ct5mr`
   - Сохраните изменения

### Шаг 3: Проверьте API ключ

1. В карточке сервисного аккаунта перейдите на вкладку **"API-ключи"**
2. Найдите API ключ с ID `aje4qp2jlkdiloe844ag`
3. Убедитесь, что:
   - **Область действия** включает `yc.ai.languageModels.execute`
   - Ключ **не истек** (срок действия: 31.07.2026)
4. Если нужно, создайте новый ключ:
   - Нажмите **"+ Создать новый ключ"**
   - Скопируйте значение ключа
   - Обновите `yandex_api_key` в `android/app/src/main/res/values/config.xml`

### Шаг 4: Проверьте права на каталог

1. Перейдите в **IAM → Роли и доступ**
2. Выберите каталог `b1gdg5qqsp63ja0ct5mr`
3. Убедитесь, что сервисный аккаунт `ajefkbqtv35r43nt4qhc` имеет:
   - Роль `ai.languageModels.user` (обязательно!)
   - Или роль `editor` (может быть недостаточно)

### Шаг 5: Пересоберите приложение

1. В Android Studio: **Build → Clean Project**
2. Затем: **Build → Rebuild Project**
3. Запустите приложение и попробуйте поиск снова

## Быстрая проверка

Если у вас есть доступ к Yandex Cloud Console, проверьте:

```bash
# Проверьте роли сервисного аккаунта
yc iam service-account get ajefkbqtv35r43nt4qhc

# Проверьте права на каталог
yc resource-manager folder list-access-bindings b1gdg5qqsp63ja0ct5mr
```

## Альтернативное решение

Если проблема не решается, создайте новый API ключ:

1. В Yandex Cloud Console: **IAM → Сервисные аккаунты → memorize**
2. **"+ Создать новый ключ"**
3. Скопируйте значение ключа
4. Обновите `android/app/src/main/res/values/config.xml`:
   ```xml
   <string name="yandex_api_key">НОВЫЙ_КЛЮЧ</string>
   ```
5. Пересоберите приложение

## Проверка после исправления

После настройки попробуйте найти текст, например:
- "Зимнее утро Пушкин"
- "Мороз и солнце день чудесный"

Если всё настроено правильно, текст должен быть найден.

